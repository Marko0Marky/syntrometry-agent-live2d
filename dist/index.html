<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Syntrometric Agent</title>
    <link rel="stylesheet" href="styles.css">
    
    <!-- Error handling script -->
    <script>
        function handleScriptError(library, fallback, message) {
            console.error(`[Error] Failed to load ${library}. ${message || ''}`);
            
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error-message';
            errorDiv.textContent = `Failed to load library: ${library}. ${message || ''}`;
            
            // Add to body if it exists, otherwise wait for DOMContentLoaded
            if (document.body) {
                document.body.appendChild(errorDiv);
            } else {
                window.addEventListener('DOMContentLoaded', () => {
                    document.body.appendChild(errorDiv);
                });
            }
            
            if (fallback) {
                console.log(`[Fallback] Attempting to load fallback: ${fallback}`);
                const script = document.createElement('script');
                script.src = fallback;
                script.onerror = () => {
                    console.error(`[Fallback Error] Fallback script ${fallback} also failed.`);
                    
                    const fallbackErrorDiv = document.createElement('div');
                    fallbackErrorDiv.className = 'error-message';
                    fallbackErrorDiv.textContent = `Fallback library ${library} also failed to load.`;
                    document.body.appendChild(fallbackErrorDiv);
                };
                script.async = false;
                document.head.appendChild(script);
            }
        }
    </script>
    
    <!-- Load TensorFlow.js -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.21.0/dist/tf.min.js"
        onerror="handleScriptError('TensorFlow.js', null, 'Could not load TensorFlow.js.')"
        onload="console.log('TensorFlow.js loaded successfully')"></script>
    
    <!-- Load Three.js -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"
        onerror="handleScriptError('Three.js', null, 'Could not load Three.js.')"
        onload="console.log('Three.js loaded successfully')"></script>
    
    <!-- Load Three.js examples -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.160.0/examples/js/controls/OrbitControls.js"
        onerror="handleScriptError('OrbitControls', null, 'Could not load OrbitControls.')"
        onload="console.log('OrbitControls loaded successfully')"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.160.0/examples/js/renderers/CSS2DRenderer.js"
        onerror="handleScriptError('CSS2DRenderer', null, 'Could not load CSS2DRenderer.')"
        onload="console.log('CSS2DRenderer loaded successfully')"></script>
    
    <!-- Load Chart.js and related libraries -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"
        onerror="handleScriptError('Chart.js', null, 'Could not load Chart.js.')"
        onload="console.log('Chart.js loaded successfully')"></script>
    <script src="https://cdn.jsdelivr.net/npm/luxon@2.5.2/build/global/luxon.min.js"
        onerror="handleScriptError('Luxon', null, 'Could not load Luxon.')"
        onload="console.log('Luxon loaded successfully')"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@1.3.1/dist/chartjs-adapter-luxon.min.js"
        onerror="handleScriptError('Chart.js Luxon Adapter', null, 'Could not load Chart.js Luxon Adapter.')"
        onload="console.log('Chart.js Luxon Adapter loaded successfully')"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-streaming@2.0.0/dist/chartjs-plugin-streaming.min.js"
        onerror="handleScriptError('Chart.js Streaming Plugin', null, 'Could not load Chart.js Streaming Plugin.')"
        onload="console.log('Chart.js Streaming Plugin loaded successfully')"></script>
    
    <!-- Load TensorFlow.js layers shim -->
    <script src="tf-layers-shim.js"></script>
    
    <!-- Load module loader and dependency checker -->
    <script src="module-loader.js"></script>
    <script src="dependency-checker.js"></script>
    
    <!-- Load app scripts -->
    <script src="tensorUtils.js"></script>
    <script src="tensorAdapter.js"></script>
    <script src="utils.js"></script>
    <script src="config.js"></script>
    <script src="environment.js"></script>
    <script src="agent.js"></script>
    <script src="viz-syntrometry.js"></script>
    <script src="viz-concepts.js"></script>
    <script src="viz-live2d.js"></script>
    <script src="draggablePanels.js"></script>
    <script src="app.js"></script>
</head>
<body>
    <!-- App content here -->
</body>
</html>
